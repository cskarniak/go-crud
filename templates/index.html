<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>{{ .Entity.LabelPlural }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets/css/list.css" rel="stylesheet">
</head>
<body>
  <div class="container mt-4">
    <h1>{{ .Entity.LabelPlural }}</h1>

    <a href="/{{ .Entity.Fiche.Name }}/new?page={{ .Page }}&pageSize={{ .PageSize }}&sort={{ .SortField }}&order={{ .SortOrder }}"
       class="btn btn-primary mb-3">
      {{ with index .Entity.Fiche.Labels "submitCreate" }}{{ . }}{{ else }}Nouveau {{ $.Entity.Label }}{{ end }}
    </a>

    <div class="table-responsive">
      <!-- Ajout de la classe table-striped pour l'effet zebra -->
      <table class="table table-hover table-striped">
        <thead>
          <tr>
            {{ range .Entity.List.Columns }}
              <th>{{ . }}</th>
            {{ end }}
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {{ range .Data }}
            {{ $row := . }}
            {{ $id  := index $row "id" }}
            <tr>
              {{ range $.Entity.List.Columns }}
                <td data-label="{{ . }}">{{ index $row . }}</td>
              {{ end }}
              <td>
                <a href="/{{ $.Entity.Fiche.Name }}/edit/{{ $id }}?page={{$.Page}}&pageSize={{$.PageSize}}&sort={{$.SortField}}&order={{$.SortOrder}}"
                   class="btn btn-sm btn-outline-secondary">Éditer</a>
                <form method="post"
                      action="/{{ $.Entity.Fiche.Name }}/delete/{{ $id }}?page={{$.Page}}&pageSize={{$.PageSize}}&sort={{$.SortField}}&order={{$.SortOrder}}"
                      style="display:inline-block">
                  <button type="submit" class="btn btn-sm btn-outline-danger">Supprimer</button>
                </form>
              </td>
            </tr>
          {{ end }}
        </tbody>
      </table>
    </div>

    {{ if gt .TotalPages 1 }}
    <nav aria-label="Pagination">
      <ul class="pagination justify-content-center mt-3">
        <li class="page-item{{ if eq .Page 1 }} disabled{{ end }}">
          <a class="page-link"
             href="/{{ .Entity.List.Name }}?page={{ sub .Page 1 }}&pageSize={{ .PageSize }}&sort={{ .SortField }}&order={{ .SortOrder }}">
            Précédent
          </a>
        </li>
        <li class="page-item disabled mx-2 align-self-center">
          Page {{ .Page }} sur {{ .TotalPages }}
        </li>
        <li class="page-item{{ if eq .Page .TotalPages }} disabled{{ end }}">
          <a class="page-link"
             href="/{{ .Entity.List.Name }}?page={{ add .Page 1 }}&pageSize={{ .PageSize }}&sort={{ .SortField }}&order={{ .SortOrder }}">
            Suivant
          </a>
        </li>
      </ul>
    </nav>
    {{ end }}

  </div>
</body>
</html>
