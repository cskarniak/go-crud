<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ if eq .Mode "new" }}Créer {{ .Entity.Label }}{{ else }}Modifier {{ .Entity.Label }}{{ end }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets/css/style.css" rel="stylesheet">
</head>
<body>
  <div class="container py-5">
    <div class="card shadow-sm rounded-2">
      <div class="card-header bg-primary text-white">
        <h2 class="h4 mb-0">
          {{ if eq .Mode "new" }}<i class="bi bi-plus-circle me-2"></i>Créer {{ .Entity.Label }}{{ else }}<i class="bi bi-pencil-square me-2"></i>Modifier {{ .Entity.Label }}{{ end }}
        </h2>
      </div>
      <div class="card-body">
        <form method="post" action="{{ if eq .Mode "new" }}/{{ .Entity.Name }}{{ else }}/{{ .Entity.Name }}/update/{{ index .DataRow "id" }}{{ end }}">
          <div class="row g-3">
            {{ range .Entity.Fields }}
              <div class="col-12 col-md-6">
                <label for="{{ .Name }}" class="form-label text-muted text-uppercase small">{{ .Label }}</label>
                <input
                  id="{{ .Name }}"
                  name="{{ .Name }}"
                  type="{{ .Type }}"
                  class="form-control form-control-lg rounded-2 shadow-sm"
                  value="{{ index $.DataRow .Name }}"
                  {{ if .ReadOnly }}readonly{{ end }}
                  {{ if .Required }}required{{ end }}
                />
              </div>
            {{ end }}
          </div>
          <div class="mt-4 d-flex justify-content-end">
            <a href="/{{ .Entity.Name }}?page={{ .Page }}&pageSize={{ .PageSize }}&sort={{ .SortField }}&order={{ .SortOrder }}" class="btn btn-outline-secondary me-2">
              <i class="bi bi-x-circle"></i> {{ index .Entity.Fiche.Labels "cancel" }}
            </a>
            <button type="submit" class="btn btn-success">
              {{ if eq .Mode "new" }}<i class="bi bi-save me-1"></i>{{ index .Entity.Fiche.Labels "submitCreate" }}{{ else }}<i class="bi bi-save me-1"></i>{{ index .Entity.Fiche.Labels "submitUpdate" }}{{ end }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- Bootstrap Icons CDN -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.js"></script>
</body>
</html>
