# config/entities/categories.yaml

entity:
  name: "categorie"
  table: "categories"
  label: "Catégorie"
  labelPlural: "Catégories"
  defaultPageSize: 10

fields:
  - name: "id"
    type: "uint"
    label: "id"
    readonly: true
    default: null
  - name: "libelle"
    type: "string"
    label: "Labellé"
    default: ""
  - name: "date_maj"
    type: "date"
    label:  "Date MAJ"
    required: true
    # 1) Déclaration du combo_base
  - name: "pod"
    type: "combo_base"
    label: "Pod"
    required: false
    default: null
  - name: "podvisu"
    label: "pod visu"
    required: False
    default: null
  
  # … ajoutez ici toutes les colonnes issues de votre schéma …

forms:
  - name: "categorieList"
    type: "list"
    entity: "categories"
    config:
      pageSize: 10   
      defaultSortField: "id"
      defaultSortOrder: "asc"
      pageSizeOptions: [5,10,25,50]
      columns: ["id","libelle"]
      searchableFields: ["id","libelle"]
      sortableFields: ["id","libelle"]
      labels:
        title: "Liste des catégories"

  - name: "categorieFiche"
    type: "fiche"
    entity: "categories"
    config:
      groups:
        - name: "Infos principales"
          fields: 
          - name: "id"
          - name: "libelle"
          - name: "date_maj"
          - name: "pod"
            type: combo_base  
            sql: |
              SELECT id,libelle
              FROM categories
              WHERE 1 = 1
              ORDER BY libelle
            keyField: id
            displayFields:
                - id
                - libelle
            separator: " - "
          - name: "podvisu"
            type: vision 
            cssClass: "field-podvisu"
            sql: |
              SELECT id,libelle
              FROM categories
              WHERE 1 = 1
              ORDER BY libelle
            keyField: id
            displayFields: 
              - id
              - libelle   
            returnField: id                # colonne qu’on renvoie dans client_id
            modalTitle: "Sélectionner une catégorie"  
      labels:
        titleCreate: "Création d’une catégorie"
        titleUpdate: "Édition d’une catégorie"
        submitCreate: "Créer"
        submitUpdate: "Enregistrer"
        cancel: "Annuler"
